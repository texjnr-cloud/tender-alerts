<!DOCTYPE html>
<html>
<head>
  <title>Enter Business Details - Tendrly</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
  <div class="max-w-3xl mx-auto p-8 pt-12">
    <!-- Header -->
    <div class="text-center mb-8">
      <h1 class="text-4xl font-bold text-gray-900 mb-2">Enter Your Business Details</h1>
      <p class="text-lg text-gray-600">This takes about 2 minutes</p>
    </div>

    <!-- Form -->
    <div class="bg-white rounded-xl shadow-lg p-8">
      <form id="signup-form" class="space-y-6">
        
        <!-- Financial Details -->
        <div>
          <h3 class="text-lg font-bold text-gray-900 mb-4">Financial Information</h3>
          <div class="grid md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-semibold text-gray-900 mb-2">Annual Turnover (£)</label>
              <input type="text" id="turnover" required 
                     placeholder="2,000,000"
                     class="w-full px-4 py-3 border border-gray-300 rounded-lg">
            </div>
            <div>
              <label class="block text-sm font-semibold text-gray-900 mb-2">Number of Employees</label>
              <input type="number" id="employees" required 
                     placeholder="8"
                     class="w-full px-4 py-3 border border-gray-300 rounded-lg">
            </div>
          </div>
        </div>

        <!-- Insurance -->
        <div class="border-t pt-6">
          <h3 class="text-lg font-bold text-gray-900 mb-4">Insurance</h3>
          <div>
            <label class="block text-sm font-semibold text-gray-900 mb-2">Public Liability (£)</label>
            <input type="text" id="publicLiability" required 
                   placeholder="5,000,000"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg">
            <p class="text-xs text-gray-500 mt-1">Most councils require £5M minimum</p>
          </div>
        </div>

        <!-- Experience -->
        <div class="border-t pt-6">
          <h3 class="text-lg font-bold text-gray-900 mb-4">Experience</h3>
          <div>
            <label class="block text-sm font-semibold text-gray-900 mb-2">Years in Adaptations Work</label>
            <input type="number" id="yearsAdaptations" required 
                   placeholder="5"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg">
            <p class="text-xs text-gray-500 mt-1">Wet rooms, level access, DFG work, etc.</p>
          </div>
        </div>

        <!-- Accreditations -->
        <div class="border-t pt-6">
          <h3 class="text-lg font-bold text-gray-900 mb-4">SSIP Accreditations</h3>
          <p class="text-sm text-gray-600 mb-3">Check all that apply</p>
          <div class="grid grid-cols-2 gap-3">
            <label class="flex items-center gap-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
              <input type="checkbox" id="hasCHAS" class="w-4 h-4 text-blue-600 rounded">
              <span class="text-sm font-medium">CHAS</span>
            </label>
            <label class="flex items-center gap-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
              <input type="checkbox" id="hasSMAS" class="w-4 h-4 text-blue-600 rounded">
              <span class="text-sm font-medium">SMAS</span>
            </label>
            <label class="flex items-center gap-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
              <input type="checkbox" id="hasConstructionline" class="w-4 h-4 text-blue-600 rounded">
              <span class="text-sm font-medium">Constructionline</span>
            </label>
            <label class="flex items-center gap-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
              <input type="checkbox" id="hasSafeContractor" class="w-4 h-4 text-blue-600 rounded">
              <span class="text-sm font-medium">SafeContractor</span>
            </label>
          </div>
        </div>

        <!-- Policies -->
        <div class="border-t pt-6">
          <h3 class="text-lg font-bold text-gray-900 mb-4">Essential Policies</h3>
          <div class="space-y-3">
            <label class="flex items-start gap-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
              <input type="checkbox" id="hasSafeguarding" class="w-4 h-4 text-blue-600 rounded mt-0.5">
              <div>
                <span class="text-sm font-medium">Safeguarding Policy</span>
                <p class="text-xs text-gray-500">Required for vulnerable tenants</p>
              </div>
            </label>
            <label class="flex items-start gap-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
              <input type="checkbox" id="hasDBSChecks" class="w-4 h-4 text-blue-600 rounded mt-0.5">
              <div>
                <span class="text-sm font-medium">DBS Checks for Staff</span>
                <p class="text-xs text-gray-500">Enhanced DBS for housing work</p>
              </div>
            </label>
            <label class="flex items-start gap-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
              <input type="checkbox" id="hasHealthSafety" class="w-4 h-4 text-blue-600 rounded mt-0.5">
              <div>
                <span class="text-sm font-medium">Health & Safety Policy</span>
                <p class="text-xs text-gray-500">CDM 2015 compliant</p>
              </div>
            </label>
          </div>
        </div>

        <!-- Location -->
        <div class="border-t pt-6">
          <label class="block text-sm font-semibold text-gray-900 mb-2">Your Location</label>
          <input type="text" id="location" required 
                 placeholder="Birmingham"
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg">
        </div>

        <!-- Submit -->
        <div class="border-t pt-6">
          <button type="submit" id="submit-btn"
                  class="w-full bg-blue-600 text-white py-4 rounded-lg font-bold text-lg hover:bg-blue-700 transition-colors">
            Check My Matches
          </button>
        </div>

      </form>
    </div>
  </div>

  <script>
    // Format currency inputs with commas
    function formatCurrency(input) {
      let cursorPosition = input.selectionStart;
      let oldLength = input.value.length;
      let value = input.value.replace(/\D/g, '');
      
      if (value) {
        value = parseInt(value).toLocaleString('en-GB');
      }
      
      input.value = value;
      let newLength = value.length;
      cursorPosition += (newLength - oldLength);
      input.setSelectionRange(cursorPosition, cursorPosition);
    }

    // Add formatting to currency fields
    ['turnover', 'publicLiability'].forEach(id => {
      const input = document.getElementById(id);
      input.addEventListener('input', () => formatCurrency(input));
      input.addEventListener('blur', () => {
        let value = input.value.replace(/\D/g, '');
        if (value) {
          input.value = parseInt(value).toLocaleString('en-GB');
        }
      });
    });

 // Form submission
document.getElementById('signup-form').addEventListener('submit', async (e) => {
  e.preventDefault();
  
  const submitBtn = document.getElementById('submit-btn');
  submitBtn.disabled = true;
  submitBtn.textContent = 'Checking matches...';
  
  try {
    // Collect form data
    const profile = {
      turnover: parseInt(document.getElementById('turnover').value.replace(/,/g, '')),
      employees: parseInt(document.getElementById('employees').value),
      publicLiability: parseInt(document.getElementById('publicLiability').value.replace(/,/g, '')),
      hasCHAS: document.getElementById('hasCHAS').checked,
      hasSMAS: document.getElementById('hasSMAS').checked,
      hasConstructionline: document.getElementById('hasConstructionline').checked,
      hasSafeContractor: document.getElementById('hasSafeContractor').checked,
      yearsAdaptations: parseInt(document.getElementById('yearsAdaptations').value),
      hasSafeguarding: document.getElementById('hasSafeguarding').checked,
      hasDBSChecks: document.getElementById('hasDBSChecks').checked,
      hasHealthSafety: document.getElementById('hasHealthSafety').checked,
      location: document.getElementById('location').value
    };
    
    console.log('Profile collected:', profile);
    
    // Store in sessionStorage
    sessionStorage.setItem('userProfile', JSON.stringify(profile));
    console.log('Stored in sessionStorage');
    
    // Redirect to results
    console.log('Redirecting to results.html');
 window.location.href = 'https://tendrly.co.uk/results.html';
    
  } catch (error) {
    console.error('Error:', error);
    alert('Error processing form. Please try again.');
    submitBtn.disabled = false;
    submitBtn.textContent = 'Check My Matches';
  }
});
  </script>
</body>
</html>
